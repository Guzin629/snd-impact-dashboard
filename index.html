
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SND Impact – Step #1, #2 & #3 (Interactive)</title>

<style>
/* =============================
   GLOBAL / LAYOUT
============================= */
body {
  font-family: Segoe UI, Arial, sans-serif;
  background:#f5f7fa;
  color:#2b2b2b;
  margin:24px;
}
.wrap { max-width:1200px; margin:0 auto; }
h1, h2 { color:#003366; margin:0 0 10px; }
.card {
  background:#fff;
  border-radius:14px;
  box-shadow:0 8px 24px rgba(0,0,0,.08);
  padding:18px;
  margin-bottom:18px;
}
.grid { display:grid; grid-template-columns:1.3fr 1fr; gap:20px; }

/* =============================
   DISCLAIMER
============================= */
.disclaimer{
  background:#fff4d6;
  border:1px solid #ffd48a;
  color:#5a3b00;
  border-radius:12px;
  padding:10px 12px;
  margin:0 auto 16px;
  max-width:1160px;
  display:flex;
  gap:10px;
  align-items:center;
}
.disclaimer .dot{
  width:10px;height:10px;border-radius:50%;
  background:#ffb020;
}
.disclaimer b{color:#7a4b00}

/* =============================
   KPI / TABLES
============================= */
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{
  background:#f0f6ff;
  border:1px solid #e1ecfb;
  border-radius:10px;
  padding:10px
}
.kpi .v{font-weight:700;font-size:18px;color:#005EB8}

table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:8px 10px;border-bottom:1px solid #eef2f7;text-align:left}
th{color:#003366;font-weight:600}

.bar{height:10px;background:#e9eef6;border-radius:6px}
.bar>span{
  display:block;height:100%;
  background:linear-gradient(90deg,#66A3D2,#005EB8)
}

/* =============================
   RADAR
============================= */
#radarWrap{position:relative}
#tooltip{
  position:absolute;
  pointer-events:none;
  background:#0b1f33;
  color:#fff;
  font-size:12px;
  padding:8px 10px;
  border-radius:8px;
  opacity:0;
  transform:translate(-50%,-120%);
}
.tick-label{fill:#6b7a8c;font-size:11px}
.axis-label{fill:#003366;font-size:12px;font-weight:600}

/* =============================
   STEP 3 / STEP 4
============================= */
.heat th{position:sticky;top:0;background:#fff}
.chip{
  font-size:12px;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid #e3e8ef;
  background:#f8fafc
}
.bar-list{display:flex;flex-direction:column;gap:12px}
.bar-label{font-size:14px;font-weight:600}
.bar-track{height:10px;background:#e9eef6;border-radius:6px}
.bar-fill{
  height:10px;border-radius:6px;
  background:linear-gradient(90deg,#66A3D2,#0B6FB8)
}
.btnLink{
  border:1px solid #d4deee;
  background:#f7fbff;
  color:#003366;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
  font-size:12px
}
.inpCell,.selCell{
  width:100%;
  border:1px solid #d4deee;
  border-radius:8px;
  padding:6px 8px;
  font-size:12px
}
.hlRow{outline:2px solid rgba(11,111,184,.8)}
</style>
</head>

<body>

<div class="disclaimer">
  <span class="dot"></span>
  <div><b>This is a mock‑up.</b> Data validation in progress.</div>
</div>

<div class="wrap">

<!-- =============================
     STEP 1
============================= -->
<div class="card">
  <h1>Step #1 – Impact Profile</h1>
  <label>Project
    <select id="projectSel">
      <option>Frida</option>
      <option selected>Tango</option>
    </select>
  </label>

  <div class="grid">
    <div id="radarWrap">
      <svg id="radarSvg" viewBox="0 0 560 560"></svg>
      <div id="tooltip"></div>
      <div class="chip">Scale: 0 (low) → 1 (high)</div>
    </div>

    <div>
      <h2>Snapshot</h2>
      <div class="kpis">
        <div class="kpi"><div>Questions</div><div id="kpiQ" class="v"></div></div>
        <div class="kpi"><div>Yes</div><div id="kpiYes" class="v"></div></div>
        <div class="kpi"><div>No</div><div id="kpiNo" class="v"></div></div>
      </div>
      <div class="kpi" style="margin-top:10px">
        <div>Average weighted impact</div>
        <div id="kpiAvg" class="v"></div>
      </div>

      <h2 style="margin-top:14px">Top impacted functions</h2>
      <table id="topTbl">
        <thead>
          <tr><th>Function</th><th>Impact</th><th style="text-align:right">Score</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- =============================
     DATA + LOGIC
============================= -->
<script>
/* =========================================================
   EMBEDDED DATA (NO EXTERNAL FILES)
========================================================= */
const DATA = {
  "Frida": {
    "rows": [
      {"Function":"SNO","#Yes":8,"#No":6,"Impact_count":0.57,"Weighted_Responses":10.47,"Weighted_Base":18.63,"Impact_weights":0.56},
      {"Function":"Factory","#Yes":5,"#No":6,"Impact_count":0.45,"Weighted_Responses":7.56,"Weighted_Base":15.06,"Impact_weights":0.50},
      {"Function":"EM SC","#Yes":5,"#No":9,"Impact_count":0.36,"Weighted_Responses":6.72,"Weighted_Base":18.06,"Impact_weights":0.37},
      {"Function":"Leaf","#Yes":0,"#No":1,"Impact_count":0,"Weighted_Responses":0,"Weighted_Base":1.53,"Impact_weights":0},
      {"Function":"Procurement","#Yes":0,"#No":6,"Impact_count":0,"Weighted_Responses":0,"Weighted_Base":8.16,"Impact_weights":0}
    ]
  },
  "Tango": {
    "rows": [
      {"Function":"Factory","#Yes":6,"#No":5,"Impact_count":0.55,"Weighted_Responses":8.34,"Weighted_Base":15.06,"Impact_weights":0.55},
      {"Function":"SNO","#Yes":8,"#No":6,"Impact_count":0.57,"Weighted_Responses":10,"Weighted_Base":18.63,"Impact_weights":0.54},
      {"Function":"EM SC","#Yes":7,"#No":7,"Impact_count":0.5,"Weighted_Responses":8.66,"Weighted_Base":18.06,"Impact_weights":0.48},
      {"Function":"Leaf","#Yes":0,"#No":1,"Impact_count":0,"Weighted_Responses":0,"Weighted_Base":1.53,"Impact_weights":0},
      {"Function":"Procurement","#Yes":0,"#No":6,"Impact_count":0,"Weighted_Responses":0,"Weighted_Base":8.16,"Impact_weights":0}
    ]
  }
};

/* =========================================================
   RENDERING (RADAR + KPIs)
========================================================= */
function polar(cx,cy,r,a){return [cx+r*Math.cos(a),cy+r*Math.sin(a)]}

function drawRadar(rows){
  const svg=document.getElementById("radarSvg");
  svg.innerHTML="";
  const cx=280,cy=280,R=220,N=rows.length;

  [0.2,0.4,0.6,0.8,1].forEach(t=>{
    const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
    c.setAttribute("cx",cx);c.setAttribute("cy",cy);
    c.setAttribute("r",t*R);c.setAttribute("fill","none");
    c.setAttribute("stroke","#e3eaf3");svg.appendChild(c);
  });

  const pts=[];
  rows.forEach((r,i)=>{
    const a=2*Math.PI*i/N-Math.PI/2;
    const [x,y]=polar(cx,cy,r.Impact_weights*R,a);
    pts.push(`${x},${y}`);
  });

  const poly=document.createElementNS("http://www.w3.org/2000/svg","polygon");
  poly.setAttribute("points",pts.join(" "));
  poly.setAttribute("fill","#66A3D2");poly.setAttribute("opacity",".3");
  poly.setAttribute("stroke","#0B6FB8");poly.setAttribute("stroke-width",2);
  svg.appendChild(poly);
}

function render(p){
  const rows=DATA[p].rows;
  const yes=rows.reduce((s,r)=>s+r["#Yes"],0);
  const no=rows.reduce((s,r)=>s+r["#No"],0);
  const avg=rows.reduce((s,r)=>s+r.Weighted_Responses,0) /
            rows.reduce((s,r)=>s+r.Weighted_Base,0);

  kpiQ.textContent=yes+no;
  kpiYes.textContent=yes;
  kpiNo.textContent=no;
  kpiAvg.textContent=avg.toFixed(2);

  const tb=document.querySelector("#topTbl tbody");
  tb.innerHTML="";
  rows.sort((a,b)=>b.Impact_weights-a.Impact_weights).slice(0,3)
    .forEach(r=>{
      tb.innerHTML+=`
        <tr>
          <td>${r.Function}</td>
          <td><div class="bar"><span style="width:${r.Impact_weights*100}%"></span></div></td>
          <td style="text-align:right">${r.Impact_weights.toFixed(2)}</td>
        </tr>`;
    });

  drawRadar(rows);
}

projectSel.onchange=e=>render(e.target.value);
render(projectSel.value);
</script>

</body>
</html>
